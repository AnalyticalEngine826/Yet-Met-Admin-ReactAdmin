(this.webpackJsonpparrot=this.webpackJsonpparrot||[]).push([[0],{344:function(e,t,r){e.exports=r(512)},349:function(e,t,r){},473:function(e,t){},512:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(14),o=r.n(c),u=(r(349),r(588)),s=r(587),i=r(12),l=r.n(i),d=r(26),f=r(19),p=r.n(f),h=(r(171),r(223),r(276)),b=r(120),m=r(110),v=r(62),g=(r(224),r(514),r(277)),w=r.n(g),k=r(66),x=function(e){return new Promise((function(t,r){var a=new FileReader;a.readAsDataURL(e.rawFile),a.onload=function(){return t(a.result)},a.onerror=r}))},E=function(e){return new Promise((function(t){var r=document.createElement("img");r.onload=function(){t({width:this.width,height:this.height})},r.src=e.src}))},y=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a,n,c){var o,u,s,i,d,f,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[t]){e.next=3;break}return e.abrupt("return",!1);case 3:if(o=Array.isArray(o)?o[0]:o,u=o.rawFile,s={},!(o&&u&&u.name)){e.next=32;break}return i=p.a.storage().ref().child("".concat(c,"/").concat(a,"/").concat(t)),e.next=10,i.put(u);case 10:return d=e.sent,e.next=13,d.ref.getDownloadURL();case 13:if(f=e.sent,s[t]=[{}],s[t][0].uploadedAt=new Date,s[t][0].src=f,s[t][0].type=u.type,s[t][0].name=u.name,0!==u.type.indexOf("image/")){e.next=31;break}return e.prev=20,e.next=23,E(o);case 23:h=e.sent,s[t][0].width=h.width,s[t][0].height=h.height,e.next=31;break;case 28:e.prev=28,e.t0=e.catch(20),console.error("Failed to get image dimensions");case 31:return e.abrupt("return",s);case 32:return e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,null,[[20,28]])})));return function(t,r,a,n,c){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a,n,c,o,u,s,i){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u&&u.map((function(e){return!!e&&Object.assign(r,e)})),s&&Object.assign(r,Object(b.a)({},i.createdAt,new Date)),(r=Object.assign(a,Object(b.a)({},i.updatedAt,new Date),r)).id||(r.id=t),e.next=6,p.a.firestore().doc("".concat(c,"/").concat(r.id)).set(o(r));case 6:return e.abrupt("return",{data:r});case 7:case"end":return e.stop()}}),e)})));return function(t,r,a,n,c,o,u,s,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this is delete id===>",t),e.next=3,p.a.database.ref.child("users").child(t).remove();case 3:return e.abrupt("return",{data:t});case 4:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this is delete ids===>",t),e.next=3,t.map((function(e){return p.a.firestore().doc("".concat(r,"/").concat(e)).delete()}));case 3:return e.abrupt("return",{data:t});case 4:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="/users/"+t.id+"/",c=p.a.database().ref(n),!t.id){e.next=8;break}return e.next=5,c.once("value").then(function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},null==t){e.next=6;break}return t.forEach((function(e){if("userId"==e.key){var a=e.val();if(null!=a){var n=t.val();n.id=a,console.log("this is user==>",n),r={data:n}}}})),e.abrupt("return",r);case 6:throw new Error("Id not found");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 8:throw new Error("Id not found");case 9:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pagination){e.next=8;break}return n=[],c=p.a.database().ref("/users"),e.next=5,c.once("value").then(function(){var e=Object(d.a)(l.a.mark((function e(r){var a,c,o,u,s,i,d,f,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.exists()){e.next=14;break}return r.forEach((function(e){var t=e.val();e.forEach((function(e){("userId"==e.key&&(t.id=e.val()),"gender"==e.key)&&(2==e.val()&&n.push(t))}))})),t.filter&&(n=n.filter((function(e){for(var r=!0,a=0,n=Object.keys(t.filter);a<n.length;a++){var c=n[a];r=e[c]===t.filter[c]}return r}))),t.sort&&n.sort(w()("".concat("ASC"===t.sort.order?"":"-").concat(t.sort.field))),a=n.map((function(e){return e.id})),c=t.pagination,o=c.page,u=c.perPage,s=(o-1)*u,i=o*u,d=n?n.slice(s,i):[],f=a.slice(s,i)||[],p=n?n.length:0,e.abrupt("return",{data:d,ids:f,total:p});case 14:console.log("No data available");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 5:return e.abrupt("return",e.sent);case 8:throw new Error("Error processing request");case 9:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userId){e.next=6;break}t.activate=!0,t.id=null,p.a.database().ref("users/"+t.userId).set(t,(function(e){if(e)throw new Error("write error");return!0})),e.next=7;break;case 6:throw new Error("User not found");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userId){e.next=6;break}t.activate=!1,t.id=null,p.a.database().ref("users/"+t.userId).set(t,(function(e){if(e)throw new Error("write error");return!0})),e.next=7;break;case 6:throw new Error("User not found");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a){var n,c,o,u,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(h.a)(t.ids),e.prev=2,c.s();case 4:if((o=c.n()).done){e.next=13;break}return u=o.value,e.next=8,I({id:u},r,a);case 8:s=e.sent,i=s.data,n.push(i);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:return e.abrupt("return",{data:n});case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t,r,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(l.a.mark((function e(t,r,a){var n,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target){e.next=11;break}return t.filter||(t.filter={}),t.filter[t.target]=t.id,e.next=5,P(t,r,a);case 5:return n=e.sent,c=n.data,o=n.total,e.abrupt("return",{data:c,total:o});case 11:throw new Error("Error processing request");case 12:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),C={upload:y,save:O,del:j,delMany:A,getItemID:function(e,t,r,a,n){var c=e.data.id||e.id||e.data.key||e.key;if(c||(c=p.a.firestore().collection(a).doc().id),!c)throw new Error("ID is required");if(n&&n[c]&&t===k.a)throw new Error("ID already in use");return c},getOne:I,getList:P,getMany:F,getManyReference:R,addUploadFeature:function(e){return function(t,r,a){if("UPDATE"===t&&a.data.image&&a.data.image.length){var n=a.data.image.filter((function(e){return!(e.rawFile instanceof File)})),c=a.data.image.filter((function(e){return e.rawFile instanceof File}));return Promise.all(c.map(x)).then((function(e){return e.map((function(e){return{src:e,title:"".concat(a.data.title)}}))})).then((function(c){return e(t,r,Object(v.a)(Object(v.a)({},a),{},{data:Object(v.a)(Object(v.a)({},a.data),{},{image:[].concat(Object(m.a)(c),Object(m.a)(n))})}))}))}return e(t,r,a)}},convertFileToBase64:x,setApprove:S,setReject:U},L={initialQuerytimeout:1e4,timestampFieldNames:{createdAt:"createdAt",updatedAt:"updatedAt"}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t=Object.assign({},L,t),a=r.timestampFieldNames,n=r.trackedResources,c={},o={},u={},s={};0===p.a.apps.length&&(p.a.initializeApp(e),p.a.auth().setPersistence(p.a.auth.Auth.Persistence.SESSION));var i=t.upload||C.upload,f=t.save||C.save,h=t.del||C.del,b=t.getItemID||C.getItemID,m=C.getOne,v=t.getMany||C.getMany,g=t.getManyReference||C.getManyReference,w=t.delMany||C.delMany,x=C.getList,E=t.firebaseSaveFilter?t.firebaseSaveFilter:function(e){return e};return n.map((function(e,t){typeof e===Array&&(e={name:e.name,path:e.path||e.name,uploadFields:e.uploadFields||[]},n[t]=e);var r=e,a=r.name,c=r.path,i=r.uploadFields;if(!e.name)throw new Error("name is missing from resource ".concat(e));s[a]=i||[],u[a]=c||a,o[a]={}})),function(){var e=Object(d.a)(l.a.mark((function e(t,r,n){var d,p,y,O,j,A;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c[r];case 2:d=null,e.t0=t,e.next=e.t0===k.d?6:e.t0===k.e?10:e.t0===k.f?14:e.t0===k.g?18:e.t0===k.b?23:e.t0===k.c?28:e.t0===k.h||e.t0===k.a?32:42;break;case 6:return e.next=8,x(n,r,o[r]);case 8:return d=e.sent,e.abrupt("return",d);case 10:return e.next=12,v(n,r,o[r]);case 12:return d=e.sent,e.abrupt("return",d);case 14:return e.next=16,g(n,r,o[r]);case 16:return d=e.sent,e.abrupt("return",d);case 18:return e.next=20,m(n,r,o[r]);case 20:return d=e.sent,console.log("this is one result==>",d),e.abrupt("return",d);case 23:return p=s[r]?s[r]:[],e.next=26,h(n.id,r,u[r],p);case 26:return d=e.sent,e.abrupt("return",d);case 28:return e.next=30,w(n.ids,r,o[r]);case 30:return d=e.sent,e.abrupt("return",d);case 32:return y=b(n,t,r,u[r],o[r]),O=s[r]?s[r].map((function(e){return i(e,n.data,y,r,u[r])})):[],j=o[r][y]||{},e.next=37,Promise.all(O);case 37:return A=e.sent,e.next=40,f(y,n.data,j,r,u[r],E,A,t===k.a,a);case 40:return d=e.sent,e.abrupt("return",d);case 42:return console.error("Undocumented method: ",t),e.abrupt("return",{data:[]});case 44:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}()},D=r(111),N={userProfilePath:"/users/",userAdminProp:"isAdmin",localStorageTokenName:"RAFirebaseClientToken",handleAuthStateChange:function(){var e=Object(d.a)(l.a.mark((function e(t,r){var a,n,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("user uid==>",t.user.uid),console.log("user auth==>",t),!t){e.next=22;break}return e.next=5,p.a.firestore().doc(r.userProfilePath+t.user.uid).get();case 5:if(a=e.sent,!(n=a.data())||!n[r.userAdminProp]){e.next=17;break}return e.next=10,t.user.getIdToken();case 10:return c=e.sent,console.log("this is firebaseToken ===> ",c),o={auth:t,profile:n,firebaseToken:c},localStorage.setItem(r.localStorageTokenName,c),e.abrupt("return",o);case 17:throw p.a.auth().signOut(),localStorage.removeItem(r.localStorageTokenName),new Error("sigin error");case 20:e.next=24;break;case 22:throw localStorage.removeItem(r.localStorageTokenName),new Error("sigin error");case 24:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(v.a)(Object(v.a)({},N),e);var t=function(){return new Promise((function(e){p.a.auth().onAuthStateChanged(e)}))};return function(){var r=Object(d.a)(l.a.mark((function r(a,n){var c,o,u,s,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a!==D.e){r.next=3;break}return e.handleAuthStateChange(null,e).catch((function(){})),r.abrupt("return",p.a.auth().signOut());case 3:if(!p.a.auth().currentUser){r.next=6;break}return r.next=6,p.a.auth().currentUser.reload();case 6:if(a!==D.a){r.next=12;break}return r.next=9,t();case 9:if(p.a.auth().currentUser){r.next=11;break}throw new Error("sigin error");case 11:return r.abrupt("return",!0);case 12:if(a!==D.c){r.next=22;break}return console.log("AUTH_GET_PERMISSIONS"),r.next=16,t();case 16:if(p.a.auth().currentUser){r.next=18;break}throw new Error("permission error");case 18:return r.next=20,p.a.auth().currentUser.getIdTokenResult();case 20:return c=r.sent,r.abrupt("return",c.claims);case 22:if(a!==D.d){r.next=30;break}if(o=n.username,u=n.password,s=n.alreadySignedIn,(i=p.a.auth().currentUser)&&s){r.next=29;break}return r.next=28,p.a.auth().signInWithEmailAndPassword(o,u);case 28:i=r.sent;case 29:return r.abrupt("return",e.handleAuthStateChange(i,e));case 30:return r.abrupt("return",!1);case 31:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},_=r(63),z=r(589),B=r(590),J=r(565),W=r(585),q=(r(591),r(595),r(106)),G=r(283),K=r(287),H=r(566),Q=r(570),V=r(569),Y=r(567),Z=r(568),$=function(e){var t=e.record,r=Object(q.a)(),c=Object(a.useState)(),o=Object(_.a)(c,2),u=o[0],s=o[1],i=Object(a.useState)(),l=Object(_.a)(i,2),d=l[0],f=l[1],p=Object(a.useState)(!0),h=Object(_.a)(p,2),b=h[0],m=h[1],v=Object(a.useState)(),g=Object(_.a)(v,2),w=g[0],k=g[1];return Object(a.useEffect)((function(){r.getList("comments",{pagination:{page:1,perPage:1e5},sort:{},filter:{voice_doc_id:t.id}}).then((function(e){var t=e.data,r=e.total;s(r),f(t),m(!1)})).catch((function(e){k(e),m(!1)}))}),[]),b?n.a.createElement(G.a,null):w?n.a.createElement(K.a,null):u?d?n.a.createElement(H.a,null,n.a.createElement(Y.a,null,n.a.createElement(Z.a,null,n.a.createElement(V.a,null,"Location"),n.a.createElement(V.a,null,"Voice"))),n.a.createElement(Q.a,null,d.map((function(e){return n.a.createElement(Z.a,{key:e.created_timestamp},n.a.createElement(V.a,null,e.address),n.a.createElement(V.a,null,n.a.createElement("audio",{controls:!0,src:e.voice_url})))})))):[]:n.a.createElement(J.a,{record:{no:"No Comment"},source:"no"})};$.defaultProps={addLabel:!0};var X=r(107),ee=["record"],te={false:"Not Approved yet",true:"Approved by Admin"},re=function(e){var t=e.record;Object(X.a)(e,ee);return t.activate?n.a.createElement(J.a,{style:{color:"green"},record:te,source:"true"}):n.a.createElement(J.a,{style:{color:"red"},record:te,source:"false"})};re.defaultProps={addLabel:!0};var ae=re,ne=function(e){var t=e.record;return n.a.createElement("audio",{controls:!0,src:t.voice_url})};ne.defaultProps={addLabel:!0};var ce=r(41),oe=["record"],ue={backgroundColor:"green",width:120,height:35,textAlign:"center",color:"white"},se={backgroundColor:"darkGray",width:120,height:35,textAlign:"center",color:"white"},ie=function(e){var t=e.record;Object(X.a)(e,oe);return t.activate?n.a.createElement(ce.a,{disalbed:!0,label:"Approve",style:se,disabled:!0,source:"true"}):n.a.createElement(ce.a,{label:"Approve",style:ue,disabled:!1,source:"false",onClick:function(){return C.setApprove(t)}})};ie.defaultProps={addLabel:!0};var le=ie,de=["record"],fe={backgroundColor:"red",width:120,height:35,textAlign:"center",color:"white"},pe={backgroundColor:"darkGray",width:120,height:35,textAlign:"center",color:"white"},he=function(e){var t=e.record;Object(X.a)(e,de);return t.activate?n.a.createElement(ce.a,{label:"REJECT",style:fe,disabled:!1,source:"true",onClick:function(){return C.setReject(t)}}):n.a.createElement(ce.a,{label:"REJECT",style:pe,disabled:!0,source:"false"})};he.defaultProps={addLabel:!0};var be=he,me=function(e){return n.a.createElement(z.a,Object.assign({},e,{title:"UserList",bulkActionButtons:!1}),n.a.createElement(B.a,{rowClick:"show"},n.a.createElement(J.a,{label:"Userid",source:"userId"}),n.a.createElement(J.a,{label:"Name",source:"fname"}),n.a.createElement(W.a,{label:"UserPhoto",source:"dpLarge"}),n.a.createElement(J.a,{label:"Email",source:"email"}),n.a.createElement(J.a,{label:"Username",source:"username"}),n.a.createElement(J.a,{label:"Location",source:"locationText"}),n.a.createElement(ae,{label:"Approved Status",source:"activate"}),n.a.createElement(le,{label:"Approve",source:"activate"}),n.a.createElement(be,{label:"Reject",source:"activate"})))},ve={apiKey:"AIzaSyDDnRZpuDk5btMYC0dNW_yzn7fKzLFfb98",authDomain:"yet-met-7eb60.firebaseapp.com",databaseURL:"https://yet-met-7eb60-default-rtdb.firebaseio.com",projectId:"yet-met-7eb60",storageBucket:"yet-met-7eb60.appspot.com",messagingSenderId:"724415903789",appId:"1:724415903789:web:670dfb47c336de81a060a4"};p.a.initializeApp(ve);var ge={userProfilePath:"/users/",userAdminProp:"isAdmin"},we=T(ve,{trackedResources:[{name:"users",path:"users"}]}),ke=function(){return n.a.createElement(u.a,{dataProvider:we,authProvider:M(ge)},n.a.createElement(s.a,{name:"users",options:{label:"UserList"},list:me}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[344,1,2]]]);
//# sourceMappingURL=main.29159d8e.chunk.js.map